import {
  __commonJS
} from "./chunk-DC5AMYBS.js";

// node_modules/@babel/runtime/helpers/typeof.js
var require_typeof = __commonJS({
  "node_modules/@babel/runtime/helpers/typeof.js"(exports, module) {
    function _typeof(o) {
      "@babel/helpers - typeof";
      return module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(o2) {
        return typeof o2;
      } : function(o2) {
        return o2 && "function" == typeof Symbol && o2.constructor === Symbol && o2 !== Symbol.prototype ? "symbol" : typeof o2;
      }, module.exports.__esModule = true, module.exports["default"] = module.exports, _typeof(o);
    }
    module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/regeneratorRuntime.js
var require_regeneratorRuntime = __commonJS({
  "node_modules/@babel/runtime/helpers/regeneratorRuntime.js"(exports, module) {
    var _typeof = require_typeof()["default"];
    function _regeneratorRuntime() {
      "use strict";
      module.exports = _regeneratorRuntime = function _regeneratorRuntime2() {
        return e;
      }, module.exports.__esModule = true, module.exports["default"] = module.exports;
      var t, e = {}, r = Object.prototype, n = r.hasOwnProperty, o = Object.defineProperty || function(t2, e2, r2) {
        t2[e2] = r2.value;
      }, i = "function" == typeof Symbol ? Symbol : {}, a = i.iterator || "@@iterator", c = i.asyncIterator || "@@asyncIterator", u = i.toStringTag || "@@toStringTag";
      function define(t2, e2, r2) {
        return Object.defineProperty(t2, e2, {
          value: r2,
          enumerable: true,
          configurable: true,
          writable: true
        }), t2[e2];
      }
      try {
        define({}, "");
      } catch (t2) {
        define = function define2(t3, e2, r2) {
          return t3[e2] = r2;
        };
      }
      function wrap(t2, e2, r2, n2) {
        var i2 = e2 && e2.prototype instanceof Generator ? e2 : Generator, a2 = Object.create(i2.prototype), c2 = new Context(n2 || []);
        return o(a2, "_invoke", {
          value: makeInvokeMethod(t2, r2, c2)
        }), a2;
      }
      function tryCatch(t2, e2, r2) {
        try {
          return {
            type: "normal",
            arg: t2.call(e2, r2)
          };
        } catch (t3) {
          return {
            type: "throw",
            arg: t3
          };
        }
      }
      e.wrap = wrap;
      var h = "suspendedStart", l = "suspendedYield", f = "executing", s = "completed", y = {};
      function Generator() {
      }
      function GeneratorFunction() {
      }
      function GeneratorFunctionPrototype() {
      }
      var p = {};
      define(p, a, function() {
        return this;
      });
      var d = Object.getPrototypeOf, v = d && d(d(values([])));
      v && v !== r && n.call(v, a) && (p = v);
      var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);
      function defineIteratorMethods(t2) {
        ["next", "throw", "return"].forEach(function(e2) {
          define(t2, e2, function(t3) {
            return this._invoke(e2, t3);
          });
        });
      }
      function AsyncIterator(t2, e2) {
        function invoke(r3, o2, i2, a2) {
          var c2 = tryCatch(t2[r3], t2, o2);
          if ("throw" !== c2.type) {
            var u2 = c2.arg, h2 = u2.value;
            return h2 && "object" == _typeof(h2) && n.call(h2, "__await") ? e2.resolve(h2.__await).then(function(t3) {
              invoke("next", t3, i2, a2);
            }, function(t3) {
              invoke("throw", t3, i2, a2);
            }) : e2.resolve(h2).then(function(t3) {
              u2.value = t3, i2(u2);
            }, function(t3) {
              return invoke("throw", t3, i2, a2);
            });
          }
          a2(c2.arg);
        }
        var r2;
        o(this, "_invoke", {
          value: function value(t3, n2) {
            function callInvokeWithMethodAndArg() {
              return new e2(function(e3, r3) {
                invoke(t3, n2, e3, r3);
              });
            }
            return r2 = r2 ? r2.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
          }
        });
      }
      function makeInvokeMethod(e2, r2, n2) {
        var o2 = h;
        return function(i2, a2) {
          if (o2 === f) throw Error("Generator is already running");
          if (o2 === s) {
            if ("throw" === i2) throw a2;
            return {
              value: t,
              done: true
            };
          }
          for (n2.method = i2, n2.arg = a2; ; ) {
            var c2 = n2.delegate;
            if (c2) {
              var u2 = maybeInvokeDelegate(c2, n2);
              if (u2) {
                if (u2 === y) continue;
                return u2;
              }
            }
            if ("next" === n2.method) n2.sent = n2._sent = n2.arg;
            else if ("throw" === n2.method) {
              if (o2 === h) throw o2 = s, n2.arg;
              n2.dispatchException(n2.arg);
            } else "return" === n2.method && n2.abrupt("return", n2.arg);
            o2 = f;
            var p2 = tryCatch(e2, r2, n2);
            if ("normal" === p2.type) {
              if (o2 = n2.done ? s : l, p2.arg === y) continue;
              return {
                value: p2.arg,
                done: n2.done
              };
            }
            "throw" === p2.type && (o2 = s, n2.method = "throw", n2.arg = p2.arg);
          }
        };
      }
      function maybeInvokeDelegate(e2, r2) {
        var n2 = r2.method, o2 = e2.iterator[n2];
        if (o2 === t) return r2.delegate = null, "throw" === n2 && e2.iterator["return"] && (r2.method = "return", r2.arg = t, maybeInvokeDelegate(e2, r2), "throw" === r2.method) || "return" !== n2 && (r2.method = "throw", r2.arg = new TypeError("The iterator does not provide a '" + n2 + "' method")), y;
        var i2 = tryCatch(o2, e2.iterator, r2.arg);
        if ("throw" === i2.type) return r2.method = "throw", r2.arg = i2.arg, r2.delegate = null, y;
        var a2 = i2.arg;
        return a2 ? a2.done ? (r2[e2.resultName] = a2.value, r2.next = e2.nextLoc, "return" !== r2.method && (r2.method = "next", r2.arg = t), r2.delegate = null, y) : a2 : (r2.method = "throw", r2.arg = new TypeError("iterator result is not an object"), r2.delegate = null, y);
      }
      function pushTryEntry(t2) {
        var e2 = {
          tryLoc: t2[0]
        };
        1 in t2 && (e2.catchLoc = t2[1]), 2 in t2 && (e2.finallyLoc = t2[2], e2.afterLoc = t2[3]), this.tryEntries.push(e2);
      }
      function resetTryEntry(t2) {
        var e2 = t2.completion || {};
        e2.type = "normal", delete e2.arg, t2.completion = e2;
      }
      function Context(t2) {
        this.tryEntries = [{
          tryLoc: "root"
        }], t2.forEach(pushTryEntry, this), this.reset(true);
      }
      function values(e2) {
        if (e2 || "" === e2) {
          var r2 = e2[a];
          if (r2) return r2.call(e2);
          if ("function" == typeof e2.next) return e2;
          if (!isNaN(e2.length)) {
            var o2 = -1, i2 = function next() {
              for (; ++o2 < e2.length; ) if (n.call(e2, o2)) return next.value = e2[o2], next.done = false, next;
              return next.value = t, next.done = true, next;
            };
            return i2.next = i2;
          }
        }
        throw new TypeError(_typeof(e2) + " is not iterable");
      }
      return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", {
        value: GeneratorFunctionPrototype,
        configurable: true
      }), o(GeneratorFunctionPrototype, "constructor", {
        value: GeneratorFunction,
        configurable: true
      }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function(t2) {
        var e2 = "function" == typeof t2 && t2.constructor;
        return !!e2 && (e2 === GeneratorFunction || "GeneratorFunction" === (e2.displayName || e2.name));
      }, e.mark = function(t2) {
        return Object.setPrototypeOf ? Object.setPrototypeOf(t2, GeneratorFunctionPrototype) : (t2.__proto__ = GeneratorFunctionPrototype, define(t2, u, "GeneratorFunction")), t2.prototype = Object.create(g), t2;
      }, e.awrap = function(t2) {
        return {
          __await: t2
        };
      }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function() {
        return this;
      }), e.AsyncIterator = AsyncIterator, e.async = function(t2, r2, n2, o2, i2) {
        void 0 === i2 && (i2 = Promise);
        var a2 = new AsyncIterator(wrap(t2, r2, n2, o2), i2);
        return e.isGeneratorFunction(r2) ? a2 : a2.next().then(function(t3) {
          return t3.done ? t3.value : a2.next();
        });
      }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function() {
        return this;
      }), define(g, "toString", function() {
        return "[object Generator]";
      }), e.keys = function(t2) {
        var e2 = Object(t2), r2 = [];
        for (var n2 in e2) r2.push(n2);
        return r2.reverse(), function next() {
          for (; r2.length; ) {
            var t3 = r2.pop();
            if (t3 in e2) return next.value = t3, next.done = false, next;
          }
          return next.done = true, next;
        };
      }, e.values = values, Context.prototype = {
        constructor: Context,
        reset: function reset(e2) {
          if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = false, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e2) for (var r2 in this) "t" === r2.charAt(0) && n.call(this, r2) && !isNaN(+r2.slice(1)) && (this[r2] = t);
        },
        stop: function stop() {
          this.done = true;
          var t2 = this.tryEntries[0].completion;
          if ("throw" === t2.type) throw t2.arg;
          return this.rval;
        },
        dispatchException: function dispatchException(e2) {
          if (this.done) throw e2;
          var r2 = this;
          function handle(n2, o3) {
            return a2.type = "throw", a2.arg = e2, r2.next = n2, o3 && (r2.method = "next", r2.arg = t), !!o3;
          }
          for (var o2 = this.tryEntries.length - 1; o2 >= 0; --o2) {
            var i2 = this.tryEntries[o2], a2 = i2.completion;
            if ("root" === i2.tryLoc) return handle("end");
            if (i2.tryLoc <= this.prev) {
              var c2 = n.call(i2, "catchLoc"), u2 = n.call(i2, "finallyLoc");
              if (c2 && u2) {
                if (this.prev < i2.catchLoc) return handle(i2.catchLoc, true);
                if (this.prev < i2.finallyLoc) return handle(i2.finallyLoc);
              } else if (c2) {
                if (this.prev < i2.catchLoc) return handle(i2.catchLoc, true);
              } else {
                if (!u2) throw Error("try statement without catch or finally");
                if (this.prev < i2.finallyLoc) return handle(i2.finallyLoc);
              }
            }
          }
        },
        abrupt: function abrupt(t2, e2) {
          for (var r2 = this.tryEntries.length - 1; r2 >= 0; --r2) {
            var o2 = this.tryEntries[r2];
            if (o2.tryLoc <= this.prev && n.call(o2, "finallyLoc") && this.prev < o2.finallyLoc) {
              var i2 = o2;
              break;
            }
          }
          i2 && ("break" === t2 || "continue" === t2) && i2.tryLoc <= e2 && e2 <= i2.finallyLoc && (i2 = null);
          var a2 = i2 ? i2.completion : {};
          return a2.type = t2, a2.arg = e2, i2 ? (this.method = "next", this.next = i2.finallyLoc, y) : this.complete(a2);
        },
        complete: function complete(t2, e2) {
          if ("throw" === t2.type) throw t2.arg;
          return "break" === t2.type || "continue" === t2.type ? this.next = t2.arg : "return" === t2.type ? (this.rval = this.arg = t2.arg, this.method = "return", this.next = "end") : "normal" === t2.type && e2 && (this.next = e2), y;
        },
        finish: function finish(t2) {
          for (var e2 = this.tryEntries.length - 1; e2 >= 0; --e2) {
            var r2 = this.tryEntries[e2];
            if (r2.finallyLoc === t2) return this.complete(r2.completion, r2.afterLoc), resetTryEntry(r2), y;
          }
        },
        "catch": function _catch(t2) {
          for (var e2 = this.tryEntries.length - 1; e2 >= 0; --e2) {
            var r2 = this.tryEntries[e2];
            if (r2.tryLoc === t2) {
              var n2 = r2.completion;
              if ("throw" === n2.type) {
                var o2 = n2.arg;
                resetTryEntry(r2);
              }
              return o2;
            }
          }
          throw Error("illegal catch attempt");
        },
        delegateYield: function delegateYield(e2, r2, n2) {
          return this.delegate = {
            iterator: values(e2),
            resultName: r2,
            nextLoc: n2
          }, "next" === this.method && (this.arg = t), y;
        }
      }, e;
    }
    module.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/regenerator/index.js
var require_regenerator = __commonJS({
  "node_modules/@babel/runtime/regenerator/index.js"(exports, module) {
    var runtime = require_regeneratorRuntime()();
    module.exports = runtime;
    try {
      regeneratorRuntime = runtime;
    } catch (accidentalStrictMode) {
      if (typeof globalThis === "object") {
        globalThis.regeneratorRuntime = runtime;
      } else {
        Function("r", "regeneratorRuntime = r")(runtime);
      }
    }
  }
});

// node_modules/@babel/runtime/helpers/asyncToGenerator.js
var require_asyncToGenerator = __commonJS({
  "node_modules/@babel/runtime/helpers/asyncToGenerator.js"(exports, module) {
    function asyncGeneratorStep(n, t, e, r, o, a, c) {
      try {
        var i = n[a](c), u = i.value;
      } catch (n2) {
        return void e(n2);
      }
      i.done ? t(u) : Promise.resolve(u).then(r, o);
    }
    function _asyncToGenerator(n) {
      return function() {
        var t = this, e = arguments;
        return new Promise(function(r, o) {
          var a = n.apply(t, e);
          function _next(n2) {
            asyncGeneratorStep(a, r, o, _next, _throw, "next", n2);
          }
          function _throw(n2) {
            asyncGeneratorStep(a, r, o, _next, _throw, "throw", n2);
          }
          _next(void 0);
        });
      };
    }
    module.exports = _asyncToGenerator, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/toPrimitive.js
var require_toPrimitive = __commonJS({
  "node_modules/@babel/runtime/helpers/toPrimitive.js"(exports, module) {
    var _typeof = require_typeof()["default"];
    function toPrimitive(t, r) {
      if ("object" != _typeof(t) || !t) return t;
      var e = t[Symbol.toPrimitive];
      if (void 0 !== e) {
        var i = e.call(t, r || "default");
        if ("object" != _typeof(i)) return i;
        throw new TypeError("@@toPrimitive must return a primitive value.");
      }
      return ("string" === r ? String : Number)(t);
    }
    module.exports = toPrimitive, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/toPropertyKey.js
var require_toPropertyKey = __commonJS({
  "node_modules/@babel/runtime/helpers/toPropertyKey.js"(exports, module) {
    var _typeof = require_typeof()["default"];
    var toPrimitive = require_toPrimitive();
    function toPropertyKey(t) {
      var i = toPrimitive(t, "string");
      return "symbol" == _typeof(i) ? i : i + "";
    }
    module.exports = toPropertyKey, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/defineProperty.js
var require_defineProperty = __commonJS({
  "node_modules/@babel/runtime/helpers/defineProperty.js"(exports, module) {
    var toPropertyKey = require_toPropertyKey();
    function _defineProperty(e, r, t) {
      return (r = toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
        value: t,
        enumerable: true,
        configurable: true,
        writable: true
      }) : e[r] = t, e;
    }
    module.exports = _defineProperty, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/classCallCheck.js
var require_classCallCheck = __commonJS({
  "node_modules/@babel/runtime/helpers/classCallCheck.js"(exports, module) {
    function _classCallCheck(a, n) {
      if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");
    }
    module.exports = _classCallCheck, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/@babel/runtime/helpers/createClass.js
var require_createClass = __commonJS({
  "node_modules/@babel/runtime/helpers/createClass.js"(exports, module) {
    var toPropertyKey = require_toPropertyKey();
    function _defineProperties(e, r) {
      for (var t = 0; t < r.length; t++) {
        var o = r[t];
        o.enumerable = o.enumerable || false, o.configurable = true, "value" in o && (o.writable = true), Object.defineProperty(e, toPropertyKey(o.key), o);
      }
    }
    function _createClass(e, r, t) {
      return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", {
        writable: false
      }), e;
    }
    module.exports = _createClass, module.exports.__esModule = true, module.exports["default"] = module.exports;
  }
});

// node_modules/injectpromise/index.js
var require_injectpromise = __commonJS({
  "node_modules/injectpromise/index.js"(exports, module) {
    module.exports = function(scope) {
      return (func, ...args) => {
        return function(func2, ...args2) {
          return new Promise((resolve, reject) => {
            func2(...args2, (err, res) => {
              if (err) {
                reject(err);
              } else {
                resolve(res);
              }
            });
          });
        }(func.bind(scope), ...args);
      };
    };
  }
});

// node_modules/sunweb/dist/SunWeb.node.js
var require_SunWeb_node = __commonJS({
  "node_modules/sunweb/dist/SunWeb.node.js"(exports, module) {
    module.exports = function(e) {
      var t = {};
      function r(n) {
        if (t[n]) return t[n].exports;
        var a = t[n] = { i: n, l: false, exports: {} };
        return e[n].call(a.exports, a, a.exports, r), a.l = true, a.exports;
      }
      return r.m = e, r.c = t, r.d = function(e2, t2, n) {
        r.o(e2, t2) || Object.defineProperty(e2, t2, { enumerable: true, get: n });
      }, r.r = function(e2) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e2, Symbol.toStringTag, { value: "Module" }), Object.defineProperty(e2, "__esModule", { value: true });
      }, r.t = function(e2, t2) {
        if (1 & t2 && (e2 = r(e2)), 8 & t2) return e2;
        if (4 & t2 && "object" == typeof e2 && e2 && e2.__esModule) return e2;
        var n = /* @__PURE__ */ Object.create(null);
        if (r.r(n), Object.defineProperty(n, "default", { enumerable: true, value: e2 }), 2 & t2 && "string" != typeof e2) for (var a in e2) r.d(n, a, (function(t3) {
          return e2[t3];
        }).bind(null, a));
        return n;
      }, r.n = function(e2) {
        var t2 = e2 && e2.__esModule ? function() {
          return e2.default;
        } : function() {
          return e2;
        };
        return r.d(t2, "a", t2), t2;
      }, r.o = function(e2, t2) {
        return Object.prototype.hasOwnProperty.call(e2, t2);
      }, r.p = "", r(r.s = 6);
    }([function(e, t) {
      e.exports = require_regenerator();
    }, function(e, t) {
      e.exports = require_asyncToGenerator();
    }, function(e, t) {
      e.exports = require_defineProperty();
    }, function(e, t) {
      e.exports = require_classCallCheck();
    }, function(e, t) {
      e.exports = require_createClass();
    }, function(e, t) {
      e.exports = require_injectpromise();
    }, function(e, t, r) {
      "use strict";
      r.r(t), r.d(t, "default", function() {
        return y;
      });
      var n = r(2), a = r.n(n), i = r(0), s = r.n(i), u = r(1), c = r.n(u), o = r(3), h = r.n(o), d = r(4), l = r.n(d), p = r(5), v = r.n(p);
      function f(e2, t2) {
        var r2 = Object.keys(e2);
        if (Object.getOwnPropertySymbols) {
          var n2 = Object.getOwnPropertySymbols(e2);
          t2 && (n2 = n2.filter(function(t3) {
            return Object.getOwnPropertyDescriptor(e2, t3).enumerable;
          })), r2.push.apply(r2, n2);
        }
        return r2;
      }
      function g(e2) {
        for (var t2 = 1; t2 < arguments.length; t2++) {
          var r2 = null != arguments[t2] ? arguments[t2] : {};
          t2 % 2 ? f(r2, true).forEach(function(t3) {
            a()(e2, t3, r2[t3]);
          }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e2, Object.getOwnPropertyDescriptors(r2)) : f(r2).forEach(function(t3) {
            Object.defineProperty(e2, t3, Object.getOwnPropertyDescriptor(r2, t3));
          });
        }
        return e2;
      }
      var y = function() {
        function e2() {
          var t3 = arguments.length > 0 && void 0 !== arguments[0] && arguments[0], r3 = arguments.length > 1 && void 0 !== arguments[1] && arguments[1], n3 = arguments.length > 2 && void 0 !== arguments[2] && arguments[2], a3 = arguments.length > 3 && void 0 !== arguments[3] && arguments[3], i3 = arguments.length > 4 && void 0 !== arguments[4] && arguments[4];
          h()(this, e2), this.mainchain = t3, this.sidechain = r3, this.isAddress = this.mainchain.isAddress, this.utils = this.mainchain.utils, this.setMainGatewayAddress(n3), this.setSideGatewayAddress(a3), this.setChainId(i3), this.injectPromise = v()(this), this.validator = this.mainchain.trx.validator;
          var s2 = this;
          this.sidechain.trx.sign = function() {
            return s2.sign.apply(s2, arguments);
          }, this.sidechain.trx.multiSign = function() {
            return s2.multiSign.apply(s2, arguments);
          };
        }
        var t2, r2, n2, a2, i2, u2, o2, d2, p2, f2, y2, m, b, x, w, k, P, T, K, j, O;
        return l()(e2, [{ key: "setMainGatewayAddress", value: function(e3) {
          if (!this.isAddress(e3)) throw new Error("Invalid main gateway address provided");
          this.mainGatewayAddress = e3;
        } }, { key: "setSideGatewayAddress", value: function(e3) {
          if (!this.isAddress(e3)) throw new Error("Invalid side gateway address provided");
          this.sideGatewayAddress = e3;
        } }, { key: "setChainId", value: function(e3) {
          if (!this.utils.isString(e3) || !e3) throw new Error("Invalid side chainId provided");
          this.chainId = e3;
        } }, { key: "signTransaction", value: function(e3, t3) {
          "string" == typeof e3 && (e3 = this.utils.code.hexStr2byteArray(e3));
          var r3 = this.utils.code.hexStr2byteArray(this.chainId), n3 = this.utils.code.hexStr2byteArray(t3.txID).concat(r3), a3 = this.sidechain.utils.ethersUtils.sha256(n3), i3 = this.utils.crypto.ECKeySign(this.utils.code.hexStr2byteArray(a3.replace(/^0x/, "")), e3);
          return Array.isArray(t3.signature) ? t3.signature.includes(i3) || t3.signature.push(i3) : t3.signature = [i3], t3;
        } }, { key: "multiSign", value: (O = c()(s.a.mark(function e3() {
          var t3, r3, n3, a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (t3 = o3.length > 0 && void 0 !== o3[0] && o3[0], r3 = o3.length > 1 && void 0 !== o3[1] ? o3[1] : this.sidechain.defaultPrivateKey, n3 = o3.length > 2 && void 0 !== o3[2] && o3[2], a3 = o3.length > 3 && void 0 !== o3[3] && o3[3], this.utils.isFunction(n3) && (a3 = n3, n3 = 0), this.utils.isFunction(r3) && (a3 = r3, r3 = this.mainchain.defaultPrivateKey, n3 = 0), a3) {
                  e4.next = 8;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.multiSign, t3, r3, n3));
              case 8:
                if (this.utils.isObject(t3) && t3.raw_data && t3.raw_data.contract) {
                  e4.next = 10;
                  break;
                }
                return e4.abrupt("return", a3("Invalid transaction provided"));
              case 10:
                return t3.raw_data.contract[0].Permission_id = n3, i3 = this.sidechain.address.toHex(this.sidechain.address.fromPrivateKey(r3)).toLowerCase(), e4.next = 14, this.sidechain.trx.getSignWeight(t3, n3);
              case 14:
                if ("PERMISSION_ERROR" !== (u3 = e4.sent).result.code) {
                  e4.next = 17;
                  break;
                }
                return e4.abrupt("return", a3(u3.result.message));
              case 17:
                if (c2 = false, u3.permission.keys.map(function(e5) {
                  e5.address === i3 && (c2 = true);
                }), c2) {
                  e4.next = 21;
                  break;
                }
                return e4.abrupt("return", a3(r3 + " has no permission to sign"));
              case 21:
                if (!u3.approved_list || -1 == u3.approved_list.indexOf(i3)) {
                  e4.next = 23;
                  break;
                }
                return e4.abrupt("return", a3(r3 + " already sign transaction"));
              case 23:
                if (!u3.transaction || !u3.transaction.transaction) {
                  e4.next = 28;
                  break;
                }
                (t3 = u3.transaction.transaction).raw_data.contract[0].Permission_id = n3, e4.next = 29;
                break;
              case 28:
                return e4.abrupt("return", a3("Invalid transaction provided"));
              case 29:
                return e4.prev = 29, e4.abrupt("return", a3(null, this.signTransaction(r3, t3)));
              case 33:
                e4.prev = 33, e4.t0 = e4.catch(29), a3(e4.t0);
              case 36:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[29, 33]]);
        })), function() {
          return O.apply(this, arguments);
        }) }, { key: "sign", value: (j = c()(s.a.mark(function e3() {
          var t3, r3, n3, a3, i3, u3, c2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (t3 = c2.length > 0 && void 0 !== c2[0] && c2[0], r3 = c2.length > 1 && void 0 !== c2[1] ? c2[1] : this.sidechain.defaultPrivateKey, n3 = !(c2.length > 2 && void 0 !== c2[2]) || c2[2], a3 = c2.length > 3 && void 0 !== c2[3] && c2[3], i3 = c2.length > 4 && void 0 !== c2[4] && c2[4], this.utils.isFunction(a3) && (i3 = a3, a3 = false), this.utils.isFunction(n3) && (i3 = n3, n3 = true, a3 = false), this.utils.isFunction(r3) && (i3 = r3, r3 = this.sidechain.defaultPrivateKey, n3 = true, a3 = false), i3) {
                  e4.next = 10;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.sign, t3, r3, n3, a3));
              case 10:
                if (!this.utils.isString(t3)) {
                  e4.next = 21;
                  break;
                }
                if (this.utils.isHex(t3)) {
                  e4.next = 13;
                  break;
                }
                return e4.abrupt("return", i3("Expected hex message input"));
              case 13:
                return e4.prev = 13, u3 = this.sidechain.trx.signString(t3, r3, n3), e4.abrupt("return", i3(null, u3));
              case 18:
                e4.prev = 18, e4.t0 = e4.catch(13), i3(e4.t0);
              case 21:
                if (this.utils.isObject(t3)) {
                  e4.next = 23;
                  break;
                }
                return e4.abrupt("return", i3("Invalid transaction provided"));
              case 23:
                if (a3 || !t3.signature) {
                  e4.next = 25;
                  break;
                }
                return e4.abrupt("return", i3("Transaction is already signed"));
              case 25:
                if (e4.prev = 25, a3) {
                  e4.next = 30;
                  break;
                }
                if (this.sidechain.address.toHex(this.sidechain.address.fromPrivateKey(r3)).toLowerCase() === t3.raw_data.contract[0].parameter.value.owner_address.toLowerCase()) {
                  e4.next = 30;
                  break;
                }
                return e4.abrupt("return", i3("Private key does not match address in transaction"));
              case 30:
                return e4.abrupt("return", i3(null, this.signTransaction(r3, t3)));
              case 33:
                e4.prev = 33, e4.t1 = e4.catch(25), i3(e4.t1);
              case 36:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[13, 18], [25, 33]]);
        })), function() {
          return j.apply(this, arguments);
        }) }, { key: "depositTrx", value: (K = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (a3 = h2.length > 3 && void 0 !== h2[3] ? h2[3] : {}, i3 = h2.length > 4 && void 0 !== h2[4] ? h2[4] : this.mainchain.defaultPrivateKey, u3 = h2.length > 5 && void 0 !== h2[5] && h2[5], this.utils.isFunction(i3) && (u3 = i3, i3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(a3) && (u3 = a3, a3 = {}), u3) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.depositTrx, t3, r3, n3, a3, i3));
              case 7:
                if (!this.validator.notValid([{ name: "callValue", type: "integer", value: t3, gte: 0 }, { name: "depositFee", type: "integer", value: r3, gte: 0 }, { name: "feeLimit", type: "integer", value: n3, gt: 0, lte: 1e9 }], u3)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return a3 = g({ callValue: Number(t3) + Number(r3), feeLimit: n3 }, a3), e4.prev = 10, e4.next = 13, this.mainchain.contract().at(this.mainGatewayAddress);
              case 13:
                return c2 = e4.sent, e4.next = 16, c2.depositTRX().send(a3, i3);
              case 16:
                return o3 = e4.sent, e4.abrupt("return", u3(null, o3));
              case 20:
                return e4.prev = 20, e4.t0 = e4.catch(10), e4.abrupt("return", u3(e4.t0));
              case 23:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[10, 20]]);
        })), function(e3, t3, r3) {
          return K.apply(this, arguments);
        }) }, { key: "depositTrc10", value: (T = c()(s.a.mark(function e3(t3, r3, n3, a3) {
          var i3, u3, c2, o3, h2, d3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (i3 = d3.length > 4 && void 0 !== d3[4] ? d3[4] : {}, u3 = d3.length > 5 && void 0 !== d3[5] ? d3[5] : this.mainchain.defaultPrivateKey, c2 = d3.length > 6 && void 0 !== d3[6] && d3[6], this.utils.isFunction(u3) && (c2 = u3, u3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(i3) && (c2 = i3, i3 = {}), c2) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.depositTrc10, t3, r3, n3, a3, i3, u3));
              case 7:
                if (!this.validator.notValid([{ name: "tokenValue", type: "integer", value: r3, gte: 0 }, { name: "depositFee", type: "integer", value: n3, gte: 0 }, { name: "feeLimit", type: "integer", value: a3, gt: 0, lte: 1e9 }, { name: "tokenId", type: "integer", value: t3, gte: 0 }], c2)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return i3 = g({ tokenId: t3, tokenValue: r3, feeLimit: a3 }, i3, { callValue: n3 }), e4.prev = 10, e4.next = 13, this.mainchain.contract().at(this.mainGatewayAddress);
              case 13:
                return o3 = e4.sent, e4.next = 16, o3.depositTRC10(t3, r3).send(i3, u3);
              case 16:
                h2 = e4.sent, c2(null, h2), e4.next = 23;
                break;
              case 20:
                return e4.prev = 20, e4.t0 = e4.catch(10), e4.abrupt("return", c2(e4.t0));
              case 23:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[10, 20]]);
        })), function(e3, t3, r3, n3) {
          return T.apply(this, arguments);
        }) }, { key: "depositTrc", value: (P = c()(s.a.mark(function e3(t3, r3, n3, a3, i3) {
          var u3, c2, o3, h2, d3, l2, p3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (u3 = p3.length > 5 && void 0 !== p3[5] ? p3[5] : {}, c2 = p3.length > 6 && void 0 !== p3[6] ? p3[6] : this.mainchain.defaultPrivateKey, o3 = p3.length > 7 && void 0 !== p3[7] && p3[7], this.utils.isFunction(c2) && (o3 = c2, c2 = this.mainchain.defaultPrivateKey), this.utils.isFunction(u3) && (o3 = u3, u3 = {}), o3) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.depositTrc, t3, r3, n3, a3, i3, u3, c2));
              case 7:
                if (!this.validator.notValid([{ name: "functionSelector", type: "not-empty-string", value: t3 }, { name: "num", type: "integer", value: r3, gte: 0 }, { name: "fee", type: "integer", value: n3, gte: 0 }, { name: "feeLimit", type: "integer", value: a3, gt: 0, lte: 1e9 }, { name: "contractAddress", type: "address", value: i3 }], o3)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                if (u3 = g({ feeLimit: a3 }, u3, { callValue: n3, tokenId: "", tokenValue: 0 }), e4.prev = 10, h2 = null, "approve" !== t3) {
                  e4.next = 21;
                  break;
                }
                return e4.next = 15, this.mainchain.contract().at(i3);
              case 15:
                return d3 = e4.sent, e4.next = 18, d3.approve(this.mainGatewayAddress, r3).send(u3, c2);
              case 18:
                h2 = e4.sent, e4.next = 44;
                break;
              case 21:
                return e4.next = 23, this.mainchain.contract().at(this.mainGatewayAddress);
              case 23:
                l2 = e4.sent, e4.t0 = t3, e4.next = "depositTRC20" === e4.t0 ? 27 : "depositTRC721" === e4.t0 ? 31 : "retryDeposit" === e4.t0 ? 35 : "retryMapping" === e4.t0 ? 39 : 43;
                break;
              case 27:
                return e4.next = 29, l2.depositTRC20(i3, r3).send(u3, c2);
              case 29:
                return h2 = e4.sent, e4.abrupt("break", 44);
              case 31:
                return e4.next = 33, l2.depositTRC721(i3, r3).send(u3, c2);
              case 33:
                return h2 = e4.sent, e4.abrupt("break", 44);
              case 35:
                return e4.next = 37, l2.retryDeposit(r3).send(u3, c2);
              case 37:
                return h2 = e4.sent, e4.abrupt("break", 44);
              case 39:
                return e4.next = 41, l2.retryMapping(r3).send(u3, c2);
              case 41:
                return h2 = e4.sent, e4.abrupt("break", 44);
              case 43:
                return e4.abrupt("break", 44);
              case 44:
                o3(null, h2), e4.next = 50;
                break;
              case 47:
                return e4.prev = 47, e4.t1 = e4.catch(10), e4.abrupt("return", o3(e4.t1));
              case 50:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[10, 47]]);
        })), function(e3, t3, r3, n3, a3) {
          return P.apply(this, arguments);
        }) }, { key: "approveTrc20", value: (k = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "approve", e4.abrupt("return", this.depositTrc(c2, t3, 0, r3, n3, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3) {
          return k.apply(this, arguments);
        }) }, { key: "approveTrc721", value: (w = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "approve", e4.abrupt("return", this.depositTrc(c2, t3, 0, r3, n3, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3) {
          return w.apply(this, arguments);
        }) }, { key: "depositTrc20", value: (x = c()(s.a.mark(function e3(t3, r3, n3, a3) {
          var i3, u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return i3 = h2.length > 4 && void 0 !== h2[4] ? h2[4] : {}, u3 = h2.length > 5 && void 0 !== h2[5] ? h2[5] : this.mainchain.defaultPrivateKey, c2 = h2.length > 6 && void 0 !== h2[6] && h2[6], o3 = "depositTRC20", e4.abrupt("return", this.depositTrc(o3, t3, r3, n3, a3, i3, u3, c2));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3, n3) {
          return x.apply(this, arguments);
        }) }, { key: "depositTrc721", value: (b = c()(s.a.mark(function e3(t3, r3, n3, a3) {
          var i3, u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return i3 = h2.length > 4 && void 0 !== h2[4] ? h2[4] : {}, u3 = h2.length > 5 && void 0 !== h2[5] ? h2[5] : this.mainchain.defaultPrivateKey, c2 = h2.length > 6 && void 0 !== h2[6] && h2[6], o3 = "depositTRC721", e4.abrupt("return", this.depositTrc(o3, t3, r3, n3, a3, i3, u3, c2));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3, n3) {
          return b.apply(this, arguments);
        }) }, { key: "mappingTrc", value: (m = c()(s.a.mark(function e3(t3, r3, n3, a3) {
          var i3, u3, c2, o3, h2, d3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (i3 = d3.length > 4 && void 0 !== d3[4] ? d3[4] : {}, u3 = d3.length > 5 && void 0 !== d3[5] ? d3[5] : this.mainchain.defaultPrivateKey, c2 = d3.length > 6 ? d3[6] : void 0, this.utils.isFunction(u3) && (c2 = u3, u3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(i3) && (c2 = i3, i3 = {}), c2) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.mappingTrc, t3, r3, n3, a3, i3, u3));
              case 7:
                if (!this.validator.notValid([{ name: "trxHash", type: "not-empty-string", value: t3 }, { name: "mappingFee", type: "integer", value: r3, gte: 0 }, { name: "feeLimit", type: "integer", value: n3, gt: 0, lte: 1e9 }], c2)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return t3 = t3.startsWith("0x") ? t3 : "0x" + t3, i3 = g({ feeLimit: n3 }, i3, { callValue: r3 }), e4.prev = 11, e4.next = 14, this.mainchain.contract().at(this.mainGatewayAddress);
              case 14:
                if (o3 = e4.sent, h2 = null, "mappingTRC20" !== a3) {
                  e4.next = 22;
                  break;
                }
                return e4.next = 19, o3.mappingTRC20(t3).send(i3, u3);
              case 19:
                h2 = e4.sent, e4.next = 29;
                break;
              case 22:
                if ("mappingTRC721" !== a3) {
                  e4.next = 28;
                  break;
                }
                return e4.next = 25, o3.mappingTRC721(t3).send(i3, u3);
              case 25:
                h2 = e4.sent, e4.next = 29;
                break;
              case 28:
                c2(new Error("type must be trc20 or trc721"));
              case 29:
                c2(null, h2), e4.next = 35;
                break;
              case 32:
                return e4.prev = 32, e4.t0 = e4.catch(11), e4.abrupt("return", c2(e4.t0));
              case 35:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[11, 32]]);
        })), function(e3, t3, r3, n3) {
          return m.apply(this, arguments);
        }) }, { key: "mappingTrc20", value: (y2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "mappingTRC20", e4.abrupt("return", this.mappingTrc(t3, r3, n3, c2, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3) {
          return y2.apply(this, arguments);
        }) }, { key: "mappingTrc721", value: (f2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "mappingTRC721", e4.abrupt("return", this.mappingTrc(t3, r3, n3, c2, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3) {
          return f2.apply(this, arguments);
        }) }, { key: "withdrawTrx", value: (p2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (a3 = h2.length > 3 && void 0 !== h2[3] ? h2[3] : {}, i3 = h2.length > 4 && void 0 !== h2[4] ? h2[4] : this.mainchain.defaultPrivateKey, u3 = h2.length > 5 && void 0 !== h2[5] && h2[5], this.utils.isFunction(i3) && (u3 = i3, i3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(a3) && (u3 = a3, a3 = {}), u3) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.withdrawTrx, t3, r3, n3, a3, i3));
              case 7:
                if (!this.validator.notValid([{ name: "callValue", type: "integer", value: t3, gte: 0 }, { name: "withdrawFee", type: "integer", value: r3, gte: 0 }, { name: "feeLimit", type: "integer", value: n3, gt: 0, lte: 1e9 }], u3)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return a3 = g({ callValue: Number(t3) + Number(r3), feeLimit: n3 }, a3), e4.prev = 10, e4.next = 13, this.sidechain.contract().at(this.sideGatewayAddress);
              case 13:
                return c2 = e4.sent, e4.next = 16, c2.withdrawTRX().send(a3, i3);
              case 16:
                return o3 = e4.sent, e4.abrupt("return", u3(null, o3));
              case 20:
                return e4.prev = 20, e4.t0 = e4.catch(10), e4.abrupt("return", u3(e4.t0));
              case 23:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[10, 20]]);
        })), function(e3, t3, r3) {
          return p2.apply(this, arguments);
        }) }, { key: "withdrawTrc10", value: (d2 = c()(s.a.mark(function e3(t3, r3, n3, a3) {
          var i3, u3, c2, o3, h2, d3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (i3 = d3.length > 4 && void 0 !== d3[4] ? d3[4] : {}, u3 = d3.length > 5 && void 0 !== d3[5] ? d3[5] : this.mainchain.defaultPrivateKey, c2 = d3.length > 6 && void 0 !== d3[6] && d3[6], this.utils.isFunction(u3) && (c2 = u3, u3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(i3) && (c2 = i3, i3 = {}), c2) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.withdrawTrc10, t3, r3, n3, a3, i3, u3));
              case 7:
                if (!this.validator.notValid([{ name: "tokenId", type: "integer", value: t3, gte: 0 }, { name: "tokenValue", type: "integer", value: r3, gte: 0 }, { name: "withdrawFee", type: "integer", value: n3, gte: 0 }, { name: "feeLimit", type: "integer", value: a3, gt: 0, lte: 1e9 }], c2)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return i3 = g({ tokenValue: r3, tokenId: t3, callValue: n3, feeLimit: a3 }, i3), e4.prev = 10, e4.next = 13, this.sidechain.contract().at(this.sideGatewayAddress);
              case 13:
                return o3 = e4.sent, e4.next = 16, o3.withdrawTRC10(t3, r3).send(i3, u3);
              case 16:
                return h2 = e4.sent, e4.abrupt("return", c2(null, h2));
              case 20:
                return e4.prev = 20, e4.t0 = e4.catch(10), e4.abrupt("return", c2(e4.t0));
              case 23:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[10, 20]]);
        })), function(e3, t3, r3, n3) {
          return d2.apply(this, arguments);
        }) }, { key: "withdrawTrc", value: (o2 = c()(s.a.mark(function e3(t3, r3, n3, a3, i3) {
          var u3, o3, h2, d3, l2, p3, v2, f3, y3, m2, b2 = this, x2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (u3 = x2.length > 5 && void 0 !== x2[5] ? x2[5] : {}, o3 = x2.length > 6 && void 0 !== x2[6] ? x2[6] : this.mainchain.defaultPrivateKey, h2 = x2.length > 7 && void 0 !== x2[7] && x2[7], this.utils.isFunction(o3) && (h2 = o3, o3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(u3) && (h2 = u3, u3 = {}), h2) {
                  e4.next = 7;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.withdrawTrc, t3, r3, n3, a3, i3, u3, o3));
              case 7:
                if (!this.validator.notValid([{ name: "functionSelector", type: "not-empty-string", value: t3 }, { name: "numOrId", type: "integer", value: r3, gte: 0 }, { name: "withdrawFee", type: "integer", value: n3, gte: 0 }, { name: "feeLimit", type: "integer", value: a3, gt: 0, lte: 1e9 }, { name: "contractAddress", type: "address", value: i3 }], h2)) {
                  e4.next = 9;
                  break;
                }
                return e4.abrupt("return");
              case 9:
                return u3 = g({ feeLimit: a3 }, u3, { callValue: n3 }), d3 = [{ type: "uint256", value: r3 }], e4.prev = 11, l2 = o3 ? this.sidechain.address.fromPrivateKey(o3) : this.sidechain.defaultAddress.base58, e4.next = 15, this.sidechain.transactionBuilder.triggerSmartContract(i3, t3, u3, d3, this.sidechain.address.toHex(l2));
              case 15:
                if ((p3 = e4.sent).result && p3.result.result) {
                  e4.next = 18;
                  break;
                }
                return e4.abrupt("return", h2("Unknown error: " + JSON.stringify(p3.transaction, null, 2)));
              case 18:
                return e4.next = 20, this.sidechain.trx.sign(p3.transaction, o3);
              case 20:
                if ((v2 = e4.sent).signature) {
                  e4.next = 25;
                  break;
                }
                if (o3) {
                  e4.next = 24;
                  break;
                }
                return e4.abrupt("return", h2("Transaction was not signed properly"));
              case 24:
                return e4.abrupt("return", h2("Invalid private key provided"));
              case 25:
                return e4.next = 27, this.sidechain.trx.sendRawTransaction(v2);
              case 27:
                if (!(f3 = e4.sent).code) {
                  e4.next = 32;
                  break;
                }
                return y3 = { error: f3.code, message: f3.code }, f3.message && (y3.message = this.sidechain.toUtf8(f3.message)), e4.abrupt("return", h2(y3));
              case 32:
                if (u3.shouldPollResponse) {
                  e4.next = 34;
                  break;
                }
                return e4.abrupt("return", h2(null, v2.txID));
              case 34:
                (m2 = function() {
                  var e5 = c()(s.a.mark(function e6() {
                    var t4, r4, n4, a4 = arguments;
                    return s.a.wrap(function(e7) {
                      for (; ; ) switch (e7.prev = e7.next) {
                        case 0:
                          if (20 != (t4 = a4.length > 0 && void 0 !== a4[0] ? a4[0] : 0)) {
                            e7.next = 3;
                            break;
                          }
                          return e7.abrupt("return", h2({ error: "Cannot find result in solidity node", transaction: v2 }));
                        case 3:
                          return e7.next = 5, b2.sidechain.trx.getTransactionInfo(v2.txID);
                        case 5:
                          if (r4 = e7.sent, Object.keys(r4).length) {
                            e7.next = 8;
                            break;
                          }
                          return e7.abrupt("return", setTimeout(function() {
                            m2(t4 + 1);
                          }, 3e3));
                        case 8:
                          if (!r4.result || "FAILED" != r4.result) {
                            e7.next = 10;
                            break;
                          }
                          return e7.abrupt("return", h2({ error: b2.sidechain.toUtf8(r4.resMessage), transaction: v2, output: r4 }));
                        case 10:
                          if (utils.hasProperty(r4, "contractResult")) {
                            e7.next = 12;
                            break;
                          }
                          return e7.abrupt("return", h2({ error: "Failed to execute: " + JSON.stringify(r4, null, 2), transaction: v2, output: r4 }));
                        case 12:
                          if (!u3.rawResponse) {
                            e7.next = 14;
                            break;
                          }
                          return e7.abrupt("return", h2(null, r4));
                        case 14:
                          return 1 === (n4 = decodeOutput(b2.outputs, "0x" + r4.contractResult[0])).length && (n4 = n4[0]), e7.abrupt("return", h2(null, n4));
                        case 17:
                        case "end":
                          return e7.stop();
                      }
                    }, e6);
                  }));
                  return function() {
                    return e5.apply(this, arguments);
                  };
                }())(), e4.next = 41;
                break;
              case 38:
                return e4.prev = 38, e4.t0 = e4.catch(11), e4.abrupt("return", h2(e4.t0));
              case 41:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[11, 38]]);
        })), function(e3, t3, r3, n3, a3) {
          return o2.apply(this, arguments);
        }) }, { key: "withdrawTrc20", value: (u2 = c()(s.a.mark(function e3(t3, r3, n3, a3, i3) {
          var u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return u3 = h2.length > 5 && void 0 !== h2[5] ? h2[5] : this.mainchain.defaultPrivateKey, c2 = h2.length > 6 && void 0 !== h2[6] && h2[6], o3 = "withdrawal(uint256)", e4.abrupt("return", this.withdrawTrc(o3, t3, r3, n3, a3, i3, u3, c2));
              case 4:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3, n3, a3) {
          return u2.apply(this, arguments);
        }) }, { key: "withdrawTrc721", value: (i2 = c()(s.a.mark(function e3(t3, r3, n3, a3, i3) {
          var u3, c2, o3, h2 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return u3 = h2.length > 5 && void 0 !== h2[5] ? h2[5] : this.mainchain.defaultPrivateKey, c2 = h2.length > 6 && void 0 !== h2[6] && h2[6], o3 = "withdrawal(uint256)", e4.abrupt("return", this.withdrawTrc(o3, t3, r3, n3, a3, i3, u3, c2));
              case 4:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3, n3, a3) {
          return i2.apply(this, arguments);
        }) }, { key: "injectFund", value: (a2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3, h2, d3, l2, p3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                if (a3 = p3.length > 3 && void 0 !== p3[3] ? p3[3] : this.mainchain.defaultPrivateKey, i3 = p3.length > 4 && void 0 !== p3[4] && p3[4], this.utils.isFunction(a3) && (i3 = a3, a3 = this.mainchain.defaultPrivateKey), this.utils.isFunction(n3) && (i3 = n3, n3 = {}), i3) {
                  e4.next = 6;
                  break;
                }
                return e4.abrupt("return", this.injectPromise(this.injectFund, t3, r3, n3, a3));
              case 6:
                if (!this.validator.notValid([{ name: "num", type: "integer", value: t3, gte: 0 }, { name: "feeLimit", type: "integer", value: r3, gt: 0, lte: 1e9 }], i3)) {
                  e4.next = 8;
                  break;
                }
                return e4.abrupt("return");
              case 8:
                return e4.prev = 8, u3 = this.sidechain.address.fromPrivateKey(a3), c2 = this.sidechain.address.toHex(u3), e4.next = 13, this.sidechain.fullNode.request("/wallet/fundinject", { owner_address: c2, amount: t3 }, "post");
              case 13:
                return o3 = e4.sent, e4.next = 16, this.sidechain.trx.sign(o3, a3);
              case 16:
                if ((h2 = e4.sent).signature) {
                  e4.next = 21;
                  break;
                }
                if (a3) {
                  e4.next = 20;
                  break;
                }
                return e4.abrupt("return", i3("Transaction was not signed properly"));
              case 20:
                return e4.abrupt("return", i3("Invalid private key provided"));
              case 21:
                return e4.next = 23, this.sidechain.trx.sendRawTransaction(h2);
              case 23:
                if (!(d3 = e4.sent).code) {
                  e4.next = 28;
                  break;
                }
                return l2 = { error: d3.code, message: d3.code }, d3.message && (l2.message = this.mainchain.toUtf8(d3.message)), e4.abrupt("return", i3(l2));
              case 28:
                return e4.abrupt("return", i3(null, h2.txID));
              case 31:
                return e4.prev = 31, e4.t0 = e4.catch(8), e4.abrupt("return", i3(e4.t0));
              case 34:
              case "end":
                return e4.stop();
            }
          }, e3, this, [[8, 31]]);
        })), function(e3, t3, r3) {
          return a2.apply(this, arguments);
        }) }, { key: "retryWithdraw", value: (n2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.sidechain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "retryWithdraw(uint256)", e4.abrupt("return", this.withdrawTrc(c2, t3, r3, n3, this.sideGatewayAddress, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, r3) {
          return n2.apply(this, arguments);
        }) }, { key: "retryDeposit", value: (r2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "retryDeposit", e4.abrupt("return", this.depositTrc(c2, t3, r3, n3, this.mainGatewayAddress, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, t3, n3) {
          return r2.apply(this, arguments);
        }) }, { key: "retryMapping", value: (t2 = c()(s.a.mark(function e3(t3, r3, n3) {
          var a3, i3, u3, c2, o3 = arguments;
          return s.a.wrap(function(e4) {
            for (; ; ) switch (e4.prev = e4.next) {
              case 0:
                return a3 = o3.length > 3 && void 0 !== o3[3] ? o3[3] : {}, i3 = o3.length > 4 && void 0 !== o3[4] ? o3[4] : this.mainchain.defaultPrivateKey, u3 = o3.length > 5 && void 0 !== o3[5] && o3[5], c2 = "retryMapping", e4.abrupt("return", this.depositTrc(c2, t3, r3, n3, this.mainGatewayAddress, a3, i3, u3));
              case 5:
              case "end":
                return e4.stop();
            }
          }, e3, this);
        })), function(e3, r3, n3) {
          return t2.apply(this, arguments);
        }) }]), e2;
      }();
    }]).default;
  }
});
export default require_SunWeb_node();
/*! Bundled license information:

@babel/runtime/helpers/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/
//# sourceMappingURL=sunweb.js.map
